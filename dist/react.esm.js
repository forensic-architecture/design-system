import e,{useState as t,useEffect as n,useRef as r,useCallback as a,createRef as i}from"react";import o from"prop-types";import c from"marked";function l(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".default{background:red}.other{background:#ff0}.alpha{background:#0f0}.beta{background:#f0f}.button{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;border:0;border-radius:0;cursor:pointer;display:inline-block;line-height:1;outline:none;text-align:left}.button--primary{color:#efefef;background-color:red}.button--secondary{color:#333;background-color:initial;box-shadow:inset 0 0 0 2px rgba(0,0,0,.15)}.button--small{font-size:12px;padding:10px 16px;margin:.6em .3em 0 0}.button--medium{font-size:14px;padding:11px 20px}.button--large{font-size:16px;padding:12px 24px}.no-hover{cursor:auto!important}.event-card{box-sizing:border-box;margin:2px 0;padding:15px;transition:.2 ease;background:#a0a0a0;opacity:.92;color:#232323;list-style-type:none;font-size:14px;line-height:20px;transition:background-color .4s;text-align:left;overflow-y:scroll;height:100%;max-width:400px}.event-card:hover{background:#dfdfdf;transition:background-color .4s}.event-card h4{margin-bottom:0;margin-right:5px;text-transform:uppercase;font-size:11px;color:#7a7a7a;font-weight:800}.event-card h4:first-child{margin-top:0}.event-card p{margin:0}.event-card .card-cell,.event-card .card-col,.event-card .card-row{width:100%;margin:5px 3px 5px 0}.event-card .card-cell.m0,.event-card .card-col.m0,.event-card .card-row.m0{margin:0}.event-card .card-col,.event-card .card-row{display:flex;flex-direction:row}.event-card .card-col .card-cell,.event-card .card-row .card-cell{flex:1}.event-card .card-col{flex-direction:column}.event-card .card-source{margin:0;padding:2px 0;border-radius:3px}.event-card .card-source .source-row{display:flex;flex-direction:row;align-items:flex-start;padding:5px 10px;border-left:3px solid #232323;background:linear-gradient(90deg,#232323 50%,transparent 0);background-size:200% 100%;background-position:100% 100%}.event-card .card-source .source-row:hover{background-color:#232323;color:#fff;cursor:pointer;background-position:0 100%;transition:all 1s ease-in}.event-card .card-source .source-icon{display:flex;align-items:center;font-size:24px;margin-right:15px}.event-card .card-source .source-type{display:inline-block;margin-right:5px;text-transform:uppercase;font-weight:700}.event-card .card-cell a{transition:color .2s}.event-card .card-cell a:hover{color:#7a7a7a;cursor:pointer;transition:color .2s}.event-card .card-cell a.disabled{color:#2c2c2c;font-weight:400;cursor:default}.event-card .card-bottomhalf{transition:.4s ease;height:auto}.event-card .card-bottomhalf.folded{transition:.4s ease;height:0;overflow:hidden}.event-card .card-toggle p{text-align:center;cursor:pointer}.event-card .card-toggle p .arrow-down{display:inline-block;transition:.2s ease;border:solid #7a7a7a;border-width:0 2px 2px 0;padding:3px;transform:rotate(-135deg);-webkit-transform:rotate(-135deg)}.event-card .card-toggle p .arrow-down.folded{transition:.2s ease;transform:rotate(45deg);-webkit-transform:rotate(45deg)}.event-card .card-toggle p:hover .arrow-down{transition:.2s ease;border:solid #232323;border-width:0 2px 2px 0}.event-card .filters{width:100%;margin:5px 0;text-align:left}.event-card .warning{background:#ee4238;color:#fff;text-transform:uppercase;width:100%;text-align:center}.event-card .timestamp{margin-top:0}.event-card .timestamp .estimated-timestamp{color:#a0a0a0;margin-left:5px}.event-card .media{display:flex;max-height:350px;flex-direction:column;cursor:pointer}.event-card .media .img-wrapper{width:100%;display:flex}.event-card .media .img-wrapper img{max-width:100%;height:auto;object-fit:cover}.event-card .media video{width:100%;user-select:none}.event-card .media video:focus{outline:0!important}.event-card .media video::-webkit-media-controls-panel{background-image:none!important;filter:brightness(.9);display:flex;align-self:flex-end;background-color:rgba(238,66,56,.6)}.event-card .media video::-webkit-media-controls-play-button{align-self:center}.event-card .media video::-webkit-media-controls-timeline{display:none}.event-card .category{margin-bottom:5px}.event-card .category .color-category{width:12px;height:12px;border-radius:20px;display:inline-block;margin:0 0 0 5px}.event-card .category p{text-align:right;flex:1}.event-card .summary{overflow:auto;margin-top:0;border-bottom:none;white-space:pre-line}.event-card .filter{display:inline-block;margin:0 5px 0 0}.event-card.selected{background:#efefef}.event-card .card-row{border-color:#a9a9a9}.card-stack{position:absolute;max-height:calc(100% - 180px);height:auto;width:386px;overflow-y:scroll;box-shadow:0 19px 38px rgba(0,0,0,.3),0 15px 12px rgba(0,0,0,.22);z-index:10;color:#fff;overflow-x:hidden;overflow-y:auto}.card-stack.narrative-mode{right:9px;left:auto;top:237px;height:calc(100% - 407px)}.card-stack.full-height{max-height:calc(100% - 20px)}.card-stack .card-stack-header{min-height:38px;line-height:38px;width:386px;box-sizing:border-box;padding:0 5px;background:#000;border-radius:2px;border:1px solid #000;font-size:14px;transition:.2s ease;text-align:left}.card-stack .card-stack-header:hover{transition:.2s ease}.card-stack .card-stack-header .header-copy{margin:0;padding:0 10px;line-height:20px;text-align:right}.card-stack .card-stack-header .header-copy.top{padding-top:10px}.card-stack .card-stack-header .header-copy:last-child{padding-bottom:10px}.card-stack .card-stack-header .side-menu-burg{position:absolute;left:8px;top:9px}.card-stack .card-stack-header .side-menu-burg span{width:20px}.card-stack .card-stack-content{width:386px}.card-stack .card-stack-content ul{padding:0;margin-top:1px;margin-bottom:0}.card-stack .card-stack-content .card-list{height:auto}.card-stack.folded .card-stack-header{border:0;height:0;overflow:hidden}.card-stack.folded .card-stack-content{height:0;overflow:hidden}li{list-style-type:none}body{font-family:Helvetica,Arial,GT-Zirkon-Regular}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9saWIvc3R5bGVzL192YXJpYWJsZXMuc2NzcyIsInNyYy9saWIvc3R5bGVzL2J1dHRvbi5zY3NzIiwic3JjL2xpYi9zdHlsZXMvY2FyZC5zY3NzIiwic3JjL2xpYi9zdHlsZXMvY2FyZHN0YWNrLnNjc3MiLCJzcmMvbGliL3N0eWxlcy9tYWluLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBcUJBLFNBQ0UsY0FOVyxDQVFiLE9BQ0UsZUFOWSxDQVFkLE9BQ0UsZUFYYSxDQWFmLE1BQ0UsZUFiWSxDQ2xCZCxRQUNFLHFEQUEyRCxDQUMzRCxlQUFtQixDQUNuQixRQUFTLENBQ1QsZUFBa0IsQ0FDbEIsY0FBZSxDQUNmLG9CQUFxQixDQUNyQixhQUFjLENBQ2QsWUFBYSxDQUNiLGVBQWdCLENBR2xCLGlCQUNFLGFEUmdCLENDU2hCLG9CREVXLENDQWIsbUJBQ0UsVUFBVyxDQUNYLHdCQUE2QixDQUM3QiwwQ0FBcUQsQ0FFdkQsZUFDRSxjQUFlLENBQ2YsaUJBQWtCLENBQ2xCLG9CQUF1QixDQUV6QixnQkFDRSxjQUFlLENBQ2YsaUJBQWtCLENBRXBCLGVBQ0UsY0FBZSxDQUNmLGlCQUFrQixDQUdwQixVQUNFLHFCQUF1QixDQ3BDekIsWUFDRSxxQkFBc0IsQ0FDdEIsWUFBYSxDQUNiLFlBQWEsQ0FDYixrQkFBb0IsQ0FDcEIsa0JGRWdCLENFRGhCLFdBQWEsQ0FDYixhRktnQixDRUpoQixvQkFBcUIsQ0FDckIsY0Y2QlUsQ0U1QlYsZ0JGOEJZLENFM0JaLCtCQUFpQyxDQUNqQyxlQUFnQixDQUNoQixpQkFBa0IsQ0FDbEIsV0FBWSxDQUNaLGVBQWdCLENBakJsQixrQkFvQkksa0JGZGdCLENFZWhCLCtCQUFpQyxDQXJCckMsZUEwQkksZUFBZ0IsQ0FDaEIsZ0JBQWlCLENBQ2pCLHdCQUF5QixDQUN6QixjRk9RLENFTlIsYUZ0QjhCLENFdUI5QixlQUFnQixDQS9CcEIsMkJBa0NNLFlBQWEsQ0FsQ25CLGNBdUNJLFFBQVMsQ0F2Q2IsbUVBNkNJ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 */");var x=function(t){var n=t.primary,r=t.backgroundColor,a=t.borderRadius,i=t.size,o=t.label,c=t.normalCursor,l=d(t,["primary","backgroundColor","borderRadius","size","label","normalCursor"]),u=n?"button--primary":"button--secondary";return e.createElement("button",s({type:"button",className:["button","button--".concat(i),u,c?"no-hover":""].join(" "),style:{backgroundColor:r,borderRadius:a}},l),o)};x.propTypes={primary:o.bool,backgroundColor:o.string,borderRadius:o.string,size:o.oneOf(["small","medium","large"]),label:o.string.isRequired,onClick:o.func},x.defaultProps={backgroundColor:"red",borderRadius:"0%",primary:!1,size:"medium",onClick:void 0};var v=function(n){var r=n.title,a=n.value,i=n.hoverValue,o=void 0===i?null:i,c=u(t(!1),2),l=c[0],s=c[1];return e.createElement("div",{className:"card-cell"},r?e.createElement("h4",null,r):null,e.createElement("div",{style:{width:"fit-content"}},e.createElement("div",{onMouseOver:function(){return o&&s(!0)},onMouseOut:function(){return o&&s(!1)}},l?e.createElement("span",{style:{pointerEvents:"none",opacity:.8}},e.createElement("em",null,o)):e.createElement("div",{style:{pointerEvents:"none",display:"inline-block",height:"1.1rem",borderBottom:o&&"1px rgb(235, 68, 62) dashed"}},a))))},h={"es-MX":{loading:"Cargando...",legend:{view2d:{paragraphs:["Seleccionando una serie de filtros verá aparecer eventos en el mapa y en la línea del tiempo.","Cada evento estará coloreado según la persona que dio el testimonio del evento."],colors:[{class:"category_group00",label:"Category Group 00"},{class:"category_group01",label:"Category Group 01"},{class:"category_group02",label:"Category Group 02"},{class:"category_group03",label:"Category Group 03"},{class:"other",label:"Other categories"}]}},toolbar:{title:"TITLE",categories:"Categories",filters:"Filters",explore_by_filter__title:"Explore by filter or category",explore_by_filter__description:"Selecting filters or categories, you'll see only those events that are tagged accordingly. If you select nothing, as well as everything, all data will be displayed.",panels:{mentions:{title:"Personas",overview:"Seleccionar los nombres de personas mostrará eventos en los que esta persona o organización ha sido mencionada, incluyendo el propio testimonio. Entre paréntesis encontrará el número de menciones. Ej. (34)."},categories:{title:"Testimonios",overview:"Seleccionar el nombre de una persona mostrará los eventos descritos por su testimonio. Entre paréntesis encontrará el número de eventos descritos. Ej. (34)."},search:{title:"Directorio de etiquetas",placeholder:"Búsqueda"}}},timeline:{zooms:["3 años","3 meses","3 días","12 horas","2 horas","30 min","10 min"],labels_title:"Testimonios",labels:["Testimony Group 00","Testimony Group 01","Testimony Group 02","Testimony Group 03","Other categories"],info:"Viendo eventos ocurridos entre"},cardstack:{header:"eventos seleccionados",unknown_location:"Localización desconocida",unknown_time:"Día y hora desconocida",timestamp:"Día y hora",estimated:"aproximado",location:"Localización",incident_type:"Tipo de acción",description:"Hechos",people:"Personas en el evento",sources:"Fuentes",category:"Según el testimonio de",communication:"Comunicación",transmitter:"Transmisor",receiver:"Receptor",warning:"(!) HECHOS CUESTIONADOS"}},"en-US":{loading:"Loading...",legend:{view2d:{paragraphs:["Selecting a series of filters, you will be able to explore events on the map of Iguala and on the timeline.","Each event is colored according the person that gave category of the event."],colors:[{class:"category_group00",label:"Category Group 00"},{class:"category_group01",label:"Category Group 01"},{class:"category_group02",label:"Category Group 02"},{class:"category_group03",label:"Category Group 03"},{class:"other",label:"Other categories"}]},default:{header:"Navigating the Platform",intro:["Open source research by [Bellingcat](https://bellingcat.com).<br/>Software and spatialisation by [Forensic Architecture](https://forensic-architecture.org).","Each event represents an occurence that is distinct in time or space, or both. An event is represented by a coloured circle on both the map and the timeline.","Select an event to reveal its content and sources. You can filter events by category or other specified filters in the top left toolbar."],notation:"Combinations of colours within a circle indicate multiple events in a single location.",arrows:"Use the left/right arrows on the keboard to move back and forth between events in time."}},toolbar:{title:"TITLE",panels:{mentions:{title:"Mentions",overview:"Selecting the names of people/organisation will show events in which these have been mentioned in their own testistimony and by others. The number in the parentheses shows how many events contain a mention of a person or organisation, e.g. (34)"},categories:{title:"Testimonies",overview:"Selecting the name of a person will show the events only according to a person’s category or category. The number in the parentheses show how many events are contained in each category, e.g. (34)."},search:{title:"Directory of filters",placeholder:"Search"}},narratives_label:"Narratives",narrative_summary:"Follow a path through the data, from one key event to the next.",categories:"Categories",filters:"Filters",filters_label:"Filters",explore_by_filter__title:"Explore by filter",explore_by_filter__description:"Selecting a filter will show you only those events that are annotated with the filter. If you select nothing, as well as everything, all data will be displayed.",explore_by_category__title:"Explore events by category",explore_by_category__description:""},timeline:{zooms:["3 years","3 months","3 days","12 hours","2 hours","30 min","10 min"],labels_title:"Testimonies",labels:["Testimony Group 00","Testimony Group 01","Testimony Group 02","Testimony Group 03","Other"],info:"Seeing events that occurred between"},cardstack:{header:"selected events",timestamp:"Day and time",unknown_location:"Unknown location",estimated:"estimated",unknown_time:"Unknown time",location:"Localization",incident_type:"Type of action",description:"Summary",filters:"Filters",nofilters:"No known filters for this event.",sources:"Sources",unknown_source:"The information for this source could not be retrieved.",category:"Category",communication:"Communication",transmitter:"Transmitter",receiver:"Receiver",warning:"(!) Highly questioned"}}};function f(e){if(null===e)return null;var t=u(new Intl.DateTimeFormat("en",{year:"numeric",month:"long",day:"2-digit"}).formatToParts(e),5),n=t[0].value,r=t[2].value,a=t[4].value;return"".concat(r," ").concat(n," ").concat(a)}var g=function(e){return 0===e.length};var k=function(t){var n=t.title,r=void 0===n?"Timestamp":n,a=t.timelabel,i=t.language,o=t.precision,c=h[i].cardstack.unknown_time;return null!=a?e.createElement("div",{className:"card-cell"},e.createElement("h4",null,r),a,o&&""!==o?" - ".concat(o):null):e.createElement("div",{className:"card-cell"},e.createElement("h4",null,r),c)},F=function(t){var n=t.text,r=t.color,a=void 0===r?"#000":r,i=t.onClick,o=void 0===i?function(){}:i,c=t.normalCursor;return e.createElement(x,{size:"small",backgroundColor:a,borderRadius:"12px",primary:!1,label:n,onClick:o,normalCursor:c})},b=function(r){var a=r.title,i=r.value,o=u(t("..."),2),s=o[0],d=o[1];return n((function(){(function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i);case 2:return t=e.sent,e.next=5,t.text();case 5:n=e.sent,d(n);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){l(i,r,a,o,c,"next",e)}function c(e){l(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}})()()})),e.createElement("div",{className:"card-cell"},a?e.createElement("h4",null,a):null,e.createElement("div",{dangerouslySetInnerHTML:{__html:c("".concat(s))}}))},y=function(t){var n=t.src,i=t.title,o=r(),c=a((function(){var e;return null===(e=o.current)||void 0===e?void 0:e.play()}),[]),l=a((function(){var e;return null===(e=o.current)||void 0===e?void 0:e.pause()}),[]),s=function(e){var t;switch(e=e.trim(),!0){case/\.((png)|(jpg)|(jpeg))$/.test(e):t="Image";break;case/\.(mp4)$/.test(e):t="Video";break;case/\.(md)$/.test(e):t="Text";break;case/\.(pdf)$/.test(e):t="Document";break;default:t="Unknown"}return t}(n),d=i&&i.length>50?"".concat(i.slice(0,51),"..."):i;switch(s){case"Video":return e.createElement("div",{className:"card-cell media"},i&&e.createElement("h4",{title:i},d),e.createElement("video",{onMouseEnter:c,onMouseLeave:l,ref:o,disablePictureInPicture:!0},e.createElement("source",{src:n})));case"Image":return e.createElement("div",{className:"card-cell media"},i&&e.createElement("h4",{title:i},d),e.createElement("div",{className:"img-wrapper"},e.createElement("img",{src:n,alt:"an inline photograph for the event card component"})));default:return null}},E=function(t){var n=t.content,r=void 0===n?[]:n,a=(t.isLoading,t.onSelect),i=void 0===a?function(){}:a,o=(t.sources,t.isSelected),c=void 0!==o&&o,l=t.language,d=void 0===l?"en-US":l;function u(t){switch(t.kind){case"media":return e.createElement("div",{className:"card-cell"},t.value.map((function(t,n){return function(t){var n=t.media,r=t.idx;return e.createElement(y,{key:r,src:n.src,title:n.title})}({media:t,idx:n})})));case"line":return e.createElement("div",{style:{height:"1rem",width:"100%"}},e.createElement("hr",null));case"line-break":return e.createElement("div",{style:{height:"".concat(t.times||1,"rem"),width:"100%"}});case"item":return null;case"markdown":return e.createElement(b,t);case"tag":return e.createElement("div",{className:"card-cell m0",style:{textTransform:"uppercase",fontSize:".8em",lineHeight:".8em"}},e.createElement("div",{style:{display:"flex",justifyContent:"flex-".concat(t.align||"start")}},t.value));case"button":return e.createElement("div",{className:"card-cell"},t.title&&e.createElement("h4",null,t.title),t.value.map((function(t,n){return e.createElement(F,s({key:"card-button-".concat(n)},t))})));case"text":return!g(t.value)&&e.createElement(v,t);case"date":return function(t){return e.createElement(k,s({language:d,timelabel:f(t.value)},t))}(t);case"links":return e.createElement("div",{className:"card-cell"},t.title&&e.createElement("h4",null,t.title),e.createElement("div",{className:"card-row m0"},t.value.map((function(t,n){var r=t.text,a=t.href;return e.createElement("a",{href:a,key:"card-links-url-".concat(n)},r)}))));case"list":return!!t.value.length&&!!t.value.filter((function(e){return!g(e)})).length?e.createElement("div",null,t.title&&e.createElement("h4",null,t.title),e.createElement("div",{className:"card-row m0"},t.value.map((function(t,n){return e.createElement(v,s({key:"card-list-text-".concat(n),value:t},t))})))):null;default:return null}}return e.createElement("li",{className:"event-card ".concat(c?"selected":""),onClick:i},r.map((function(t){return function(t){return e.createElement("div",{className:"card-row"},t.map((function(t){return e.createElement(e.Fragment,null,u(t))})))}(t)})))},U=function(t){var a=t.isCardstack,o=void 0===a||a,c=t.isLoading,l=void 0!==c&&c,s=t.language,d=void 0===s?"en-US":s,u=t.narrative,Q=void 0===u?null:u,m=t.onHighlight,p=void 0===m?function(){}:m,x=t.onSelect,v=void 0===x?function(){}:x,f=t.onToggleCardstack,g=void 0===f?function(){}:f,k=t.onViewSource,F=void 0===k?function(){}:k,b=t.timelineDims,y=void 0===b?{height:250,width:0,marginLeft:100,marginTop:15,marginBottom:60,contentHeight:200,width_controls:100}:b,U=t.selected,B=void 0===U?null:U,N=t.sourceError,L=void 0!==N&&N,C=r([]),w=r(),D=r();n((function(){!!Q&&function(e){var t=e.to,n=void 0===t?null:t,r=e.duration,a=void 0===r?500:r,i=n,o=window.offsetTop,c=i.scrollTop,l=o-c,s=0;!function e(){var t,n,r,o=(t=s+=20,n=c,r=l,(t/=a/2)<1?r/2*t*t+n:-r/2*((t-=1)*(t-2)-1)+n);i.scrollTop=o,s<a&&setTimeout(e,20)}()}({from:C[Q.current].current.offsetTop,to:w.current,duration:500})}),[Q]),n((function(){}),[B]);var S,I,R=function(t,n){return n||(n=t.map((function(e){return!0}))),C.current=[],t.map((function(t,r){var a,o=i();return C.current[r]=o,e.createElement(E,{key:"card-stack-iten-".concat(r),event:t,ref:o,sourceError:L,language:d,isLoading:l,isSelected:n[r],onViewSource:F,onHighlight:p,onSelect:v,idx:r,inlineMedia:null==t||null===(a=t.sources[0])||void 0===a?void 0:a.paths})}))},T=function(){return e.createElement("div",{id:"card-stack-content",className:"card-stack-content"},e.createElement("ul",null,B.length>0?R(B):null))},J=function(){return e.createElement("div",{id:"card-stack-content",className:"card-stack-content",ref:D},e.createElement("ul",null,(t=Q.steps,n=t.map((function(e,t){return t===Q.current})),R(t,n))));var t,n};return e.createElement(e.Fragment,null,(I="calc(100% - 237px - ".concat(y.height,"px)"),(null==B?void 0:B.length)>0?Q?e.createElement("div",{id:"card-stack",ref:w,className:"card-stack narrative-mode\n            ".concat(o?"":" folded"),style:{height:I}},J()):e.createElement("div",{id:"card-stack",className:"card-stack\n            ".concat(o?"":" folded")},(S=h[d].cardstack.header,e.createElement("div",{id:"card-stack-header",className:"card-stack-header",onClick:function(){return g()}},e.createElement("button",{className:"side-menu-burg is-active"},e.createElement("span",null)),e.createElement("p",{className:"header-copy top"},"".concat(B.length," ").concat(S)))),T()):e.createElement("div",null)))},B=function(t){var n=t.small;return e.createElement("div",{className:"spinner ".concat(n?"small":"")},e.createElement("div",{className:"double-bounce-overlay"}),e.createElement("div",{className:"double-bounce"}))};function N(e){switch(e.match(/\.[0-9a-z]+$/i)[0]){case".jpg":case".png":return[{kind:"media",value:[{src:e}]}];case".pdf":return[{kind:"button",value:[{text:"See full PDF",color:"white",href:e,onClick:function(){return window.open(e,"_blank")}}]}];case".md":return[{kind:"markdown",value:e}];default:return null}}var L={default:function(e){var t=e.event;return[[{kind:"date",title:"Incident Date",value:t.datetime||t.date||""},{kind:"text",title:"Location",value:t.location||"—"}],[{kind:"line-break",times:.4}],[{kind:"text",title:"Summary",value:t.description||"",scaleFont:1.1}],[{kind:"line-break",times:.8}]].concat(Q(t.sources.map((function(e,t){return e.paths.length<=0?null:[[{kind:"button",title:"Source ".concat(t+1),value:[{text:e.title,color:null,href:e.url,onClick:function(){return window.open(e.url,"_blank")}}]}],[{kind:"text",value:e.description}]].concat(Q(e.paths.map(N).filter((function(e){return null!==e}))))})).filter((function(e){return null!==e})).flatMap((function(e){return e}))))},basic:function(e){var t=e.event;return[[{kind:"date",title:"Incident Date",value:t.datetime||t.date||""},{kind:"text",title:"Location",value:t.location||"—"}],[{kind:"line-break",times:.4}],[{kind:"text",title:"Summary",value:t.description||"",scaleFont:1.1}]]},us_protests:function(e){var t,n=e.event,r=e.colors,a=e.coloringSet,i=e.getFilterIdxFromColorSet;switch(n.location_precision){case"Generalised":t="No location data";break;case"Estimated":t="Precise location estimated";break;case"Self-reported":t="Location reported by witness";break;case"Confirmed":default:t=null}return[[{kind:"tag",align:"end",value:"Incident #".concat(n.incident_id)}],[{kind:"line"}],[{kind:"date",title:"Incident Date",value:n.datetime},{kind:"text",title:"Location",hoverValue:t,value:n.location}],[{kind:"line-break",times:.4}],[{kind:"text",title:"Summary",value:n.description,scaleFont:1.1}],[{kind:"line-break",times:.4}],[{kind:"button",title:"Type of Violation",value:n.associations.slice(0,-1).map((function(e){return{text:e,color:i(e,a)>=0?r[i(e,a)]:null,normalCursor:!0}}))},{kind:"button",title:"Against",value:n.associations.slice(-1).map((function(e){return{text:e,color:null,normalCursor:!0}}))}],[{kind:"line-break",times:.2}],[{kind:"list",title:"Law Enforcement Agencies",value:n.le_agencys}],[{kind:"text",title:"Name of reporter(s)",value:n.journalist_name},{kind:"text",title:"Network",value:n.news_organisation}],[{kind:"FALSE"===n.hide_source?"button":"markdown",title:"Sources",value:"FALSE"===n.hide_source?n.links.map((function(e,t){return{text:"Source ".concat(t+1),href:e,color:null,onClick:function(){return window.open(e,"_blank")}}})):"Source hidden to protect the privacy and dignity of civilians. Read more [here](https://staging.forensic-architecture.org/wp-content/uploads/2020/09/2020.14.09-FA-Bcat-Mission-Statement.pdf)."}]]},yemen:function(e){var t,n=e.event;switch(n.precision_exact){case"YES":t="Precise location confirmed";break;case"NO":t="Location estimated";break;default:t=null}return[[{kind:"date",title:"Incident Date",value:n.datetime},{kind:"text",title:"Location",hoverValue:t,value:n.location}],[{kind:"line-break",times:.4}],[{kind:"text",title:"Summary",value:n.description,scaleFont:1.1}],[{kind:"line-break",times:.4}],[{kind:"text",title:"Remnants found",value:n.remnants_found}],[{kind:"line-break",times:.4}],[{kind:"text",title:"Manufacturer",value:n.manufacturer}],[{kind:"line-break",times:.4}],[n.type_of_attack&&{kind:"button",title:"Type of Attack",value:n.associations.filter((function(e){return e.title===n.type_of_attack})).map((function(e){return{text:n.type_of_attack,color:e.colour,normalCursor:!0}}))}],[{kind:"line-break",times:.2}],[{kind:"button",title:"Sources",value:n.links.map((function(e,t){return{text:"Source ".concat(t+1),href:e,color:null,onClick:function(){return window.open(e,"_blank")}}}))}],[{kind:"line-break",times:.2}],[{kind:"media",title:"Media",value:n.media}]]}};export{x as Button,E as Card,U as CardStack,B as Spinner,L as generateCardLayout};
//# sourceMappingURL=react.esm.js.map
